{include file="public/header"}
<!-- 配置文件 -->
<script type="text/javascript" src="utf8-php/ueditor.config.js"></script>
<!-- 编辑器源码文件 -->
<script type="text/javascript" src="utf8-php/ueditor.all.js"></script>
<!-- 实例化编辑器 -->
<script type="text/javascript">
    var ue = UE.getEditor('container');
</script>

<div class="content" id="lessonEdit">
	<div class="rightBox">
		<div class="main">
			
			<div class="seach_tigs" id="edit">
				<h3>修改课程</h3>
	            
	                <ul class="clearfix">
                        <li>
                            <label class="seach-label">
                                <span>*</span>课程名称：
                            </label>
                            <input type="text" name="" value="" class="form-control" v-model="name">
                        </li>
                        <li>
                            <label class="seach-label">
                                <span>*</span>课程编号：
                            </label>
                            <input type="text" name="" value="" class="form-control" v-model="code">
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>课程图片：
                            </label>
	                        <div class="file_top">
	                            <span>点击选择图片</span>
	                            <input type="file" name="" id="file"  v-model="img">
                            </div>
                            <div class="fileBox"><p>建议上传图片的尺寸比例为1:1，大小不超过1M</p>
                            <img src="images/1.jpg" height="100"></div>
                        </li>
                        <li>
                            <label class="seach-label">
                                <span>*</span>所属校区：
                            </label>
                            <select class="form-control input-median" text="true" name="" id="province_id" v-model="province">
                            </select>
                            <select class="form-control input-median" text="true" name="" id="city_id" v-model="city">
                            </select>
                            <select class="form-control input-median" text="true" name="" id="district_id" v-model="area" @change="choose()">
                            </select>
                            <select class="form-control input-median" name="" id="school_id">
                                <option value="">请选择校区</option>
                                <option v-for='school_name in school_name' :value="school_name.value">{{school_name.label}}</option>
                            </select>
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>课堂类型：
                            </label>
                            <select class="form-control" name="type" v-model="lessonType2">
                                <option value="">请选择课堂</option>
                                <option :value="t.value" v-for="t in lessonType" name="selectId">{{t.label}}</option>
                            </select>
                        </li>
                        <li>
                            <label class="seach-label">
                                <span>*</span>班型：
                            </label>
                            <select class="form-control" name="type" v-model="classType2">
                                <option value="">请选择班型</option>
                                <option :value="t.value" v-for="t in classType">{{t.label}}</option>
                            </select>
                        </li>
                        <li>
                            <label class="seach-label">
                                <span>*</span>学期：
                            </label>
                            <input type="text" name="" value="" class="form-control" v-model="semester">
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>选择年级科目：
                            </label>
                        	<select name="grade_id" class="form-control input-xlarge" id="grade_id" v-model="grade2">
		                        <option value="">请选择年级</option>
		                        <option :value="t.value" v-for="t in grade">{{t.label}}</option>
		                        
	                        </select>
	                    	<select name="subject_id" id="subject_id" class="form-control input-xlarge" v-model="subjects2">
		                        <option value="">请选择科目</option>
		                        <option :value="t.value" v-for="t in subjects">{{t.label}}</option>
		                        
	                        </select>
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>选择老师：
                            </label>
                            <select class="form-control" name="type" v-model="teacher2">
                                <option value="">请选择老师</option>
                                <option :value="t.value" v-for="t in teacher">{{t.label}}</option>
                            </select>
                        </li>
                        <!-- <li>
                        	<label class="seach-label" style="float:left">
                                <span>*</span>商品规格：
                            </label>
                            <table id="goods_spe" border="1" width="950">
		                        <thead>
			                        <tr>
			                            <th style="text-align:center;background:#ccc" width="20%">规格名称</th>
			                            <th style="text-align:center;background:#ccc" width="16%">价格</th>
			                            <th style="text-align:center;background:#ccc" width="16%">库存</th>
			                            <th style="text-align:center;background:#ccc" width="16%">排序</th>
			                            <th style="text-align:center;background:#ccc" width="16%">每人限购</th>
			                            <th style="text-align:center;background:#ccc" width="16%">操作</th>
			                        </tr>
			                    </thead>
                        		<tbody>
		                            <tr>
		                                <td>
		                                    <input name="" value="体验课1节" maxlength="50" style="width:100%" type="text">
		                                    <input name="" value="3382" type="hidden">
		                                    <input name="" value="31562" type="hidden">
		                                </td>
		                                <td>
		                                	<input name="" value="6.60" style="width:100%" type="text">
		                                </td>
		                                <td><input name="" value="200" min="0" max="999999999" style="width:100%" type="number"></td>
		                                <td><input name="" value="1" max="999999" style="width:100%" type="number"></td>
		                                <td><input name="" value="1" min="0" max="99999" style="width:100%" type="number"></td>
		                                <td align="center"><a href="javascript:;">删除</a></td>
		                            </tr>
		                            <tr>
		                                <td>
		                                    <input name="" value="课程定金" maxlength="50" style="width:100%" type="text">
		                                    <input name="" value="3382" type="hidden">
		                                    <input name="" value="31563" type="hidden">
		                                </td>
		                                <td><input name="" value="200.00" style="width:100%" type="text"></td>
		                                <td><input name="" value="300" min="0" max="999999999" style="width:100%" type="number"></td>
		                                <td><input name="" value="1" max="999999" style="width:100%" type="number"></td>
		                                <td><input name="" value="1" min="0" max="99999" style="width:100%" type="number"></td>
		                                <td align="center"><a href="javascript:;">删除</a></td>
		                            </tr>
                            	</tbody>
                            </table>
                            <div class="topBtns"><a href="javascript:;">添加规格</a></div>
                        </li> -->
                        <li>
                        	<label class="seach-label">
                                <span>*</span>开课时间：
                            </label>
                        	<input class="form-control input-xlarge" id="test5" type="text"> 至
                        	<input class="form-control input-xlarge" id="test4" type="text">
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>课程节数：
                            </label>
                            <input type="number" name="" value="" class="form-control" v-model="lessonNum">
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>课程时长：
                            </label>
                            <input type="number" name="" value="" class="form-control" v-model="lessonTime">
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>课程详情：
                            </label>

                            <style>
                            	#edui1{width:100%;}
                            </style>
                            <!-- 加载编辑器的容器 -->
                            <textarea id="container" style="width:900px;margin-left:137px;margin-top:-23px;"  v-model="intro"></textarea> 
	
                        </li>
                        <li>
                        	<label class="seach-label">
                                排序：
                            </label>
                            <input type="number" name="" value="" class="form-control" v-model="num">
                        </li>
                        <!-- <li>
                        	<label class="seach-label">
                                <span>*</span>是否推荐：
                            </label>
                            <input type="radio" name="t1" value="" class="radio"> 是 &nbsp;&nbsp;&nbsp;<input type="radio" name="t1" value="" class="radio"> 否
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>显示状态：
                            </label>
                            <input type="radio" name="s1" value="" class="radio"> 显示 &nbsp;&nbsp;&nbsp;<input type="radio" name="s1" value="" class="radio"> 隐藏
                        </li> -->
                        <li class="seach"><input type="submit" name="" value="确认" @click="get()"></li>
                    </ul>
                
            </div>

		</div>
	</div>
</div>

{include file="public/footer"}
<script src="__PUBLIC__/admin/js/laydate.js"></script>
<script type="text/javascript">

showLocation();
CheckProvince('');
CheckCity('');
CheckTown('');

laydate.render({
  elem: '#test5',
  type: 'datetime'
});
laydate.render({
  elem: '#test4',
  type: 'datetime'
});




var vue=new Vue({
    el:'#lessonEdit',
    data:{
        name:'',//课程名称
        code:'',//编号
        img:'',//图片
        province:'',//省
        city:'',//市
        area:'',//区
        school_name:[],//校区名
        lessonType2:'',
        lessonType:[
            {value:'金石V课',label:'金石V课'},
            {value:'金石拼课',label:'金石拼课'},
            {value:'金石1对1',label:'金石1对1'}
        ],//课堂类型
        classType2:'',
        classType:[
            {value:'班型1',label:'班型1'},
            {value:'班型2',label:'班型2'},
            {value:'班型3',label:'班型3'}
        ],//班型
        semester:'',//学期
        grade2:'',
        grade:[
            {value:'高三',label:'高三'},
            {value:'高二',label:'高二'},
            {value:'高一',label:'高一'},
            {value:'九年级',label:'九年级'},
            {value:'八年级',label:'八年级'},
            {value:'七年级',label:'七年级'},
            {value:'六年级',label:'六年级'},
            {value:'五年级',label:'五年级'},
            {value:'四年级',label:'四年级'},
            {value:'三年级',label:'三年级'},
            {value:'二年级',label:'二年级'},
            {value:'一年级',label:'一年级'}
        ],//年级
        subjects2:'',
        subjects:[
            {value:'化学',label:'化学'},
            {value:'物理',label:'物理'},
            {value:'生物',label:'生物'},
            {value:'地理',label:'地理'},
            {value:'政治',label:'政治'},
            {value:'英语',label:'英语'},
            {value:'数学',label:'数学'},
            {value:'语文',label:'语文'}
        ],//科目
        teacher2:'',
        teacher:[
            {value:'慕承和',label:'慕承和'},
            {value:'薛桐',label:'薛桐'},
            {value:'柏林',label:'柏林'},
            {value:'胡歌',label:'胡歌'}
        ],//老师
        
        lessonNum:'',//课程节数
        lessonTime:'',//课程时长
        intro:'',//课程详情
        num:''//序号
    },
    methods:{
        get:function(){
            var startTime=$('#test5').val();
            var endTime=$('#test4').val();
            var intro=ue.getContent();
            console.log(intro);
            this.$http.post(baseurl+'?s=admin/Lesson/lesson_edit',{
                'name':this.name,
                'code':this.code,
                'img':this.img,
                'province':this.province,
                'city':this.city,
                'area':this.area,
                'school_name':this.school_name,
                'lessonType':this.lessonType,
                'classType':this.classType,
                'semester':this.semester,
                'grade':this.grade,
                'subjects':this.subjects,
                'teacher':this.teacher,
                'time':this.time,
                'lessonNum':this.lessonNum,
                'lessonTime':this.lessonTime,
                'intro':intro,
                'num':this.num,
                'classType2':this.classType2,
                'lessonType2':this.lessonType2,
                'grade2':this.grade2,
                'subjects2':this.subjects2,
                'teacher2':this.teacher2,
                'startTime':startTime,
                'endTime':endTime
            }).then(res=>{
                console.log(res);
            },res=>{

            })
        },
        choose:function(){
            this.$http.post(baseurl+'?s=admin/Lesson/get_school',{
                'province':this.province,
                'city':this.city,
                'area':this.area}).then(res=>{
                    //console.log(res);
                    this.school_name=eval('('+res.bodyText+')');
                },res=>{
                    console.log('请求失败处理,请检查Network!');
                })
            
        },
        
    }
})


</script>
</body>
</html>