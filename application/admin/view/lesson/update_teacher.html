{include file="public/header"}
 <!-- 配置文件 -->
<script type="text/javascript" src="utf8-php/ueditor.config.js"></script>
<!-- 编辑器源码文件 -->
<script type="text/javascript" src="utf8-php/ueditor.all.js"></script>
<!-- 实例化编辑器 -->
<script type="text/javascript">
    var ue = UE.getEditor('container');
</script>	
<div class="content" id="update">
	<div class="rightBox">
		<div class="main">
			<div class="seach_tigs" id="edit">
				<h3>新增教师</h3>
	            
	                <ul class="clearfix">
                        <li>
                            <label class="seach-label">
                                <span>*</span>教师名称：
                            </label>
                            <input type="text" name="" v-model="name" class="form-control">
                        </li>
                        <li>
                            <label class="seach-label">
                                <span>*</span>教师编号：
                            </label>
                            <input type="text" name="" v-model="code" class="form-control">
                        </li>
                        <li>
                        	<label class="seach-label">
                                <span>*</span>教师头像：
                            </label>
	                        <div class="file_top">
	                            <span>点击选择图片</span>
	                            <input type="file" name="" id="file">
	                            <input type="hidden" name="" value=" " v-model="pic">
                            </div>
                            <div class="fileBox"><p>建议上传图片的尺寸比例为1:1，大小不超过1M</p>
                            <img src="images/1.jpg" height="100"></div>
                        </li>
                        <li>
                            <label class="seach-label">
                                <span>*</span>所属校区：
                            </label>
                            <select class="form-control input-median" text="true" name="province_id"
                                    id="province_id" v-model="province">
                                   
                            </select>
                            <select class="form-control input-median" text="true" name="city_id" id="city_id" v-model="city">
                                
                            </select>
                            <select class="form-control input-median" text="true" name="district_id" id="district_id"   @change="choose()" v-model="area">
                            </select>
                            <select class="form-control input-median" v-model='school_id' name="school_id" id="school_id">
                                <option value="">请选择校区</option>
                                <option v-for="schoolName in school_name" :value="schoolName.ID">{{schoolName.SCHOOL_NAME}}</option>
                            </select>
                        </li>
                        <li>
                            <label class="seach-label">
                                <span>*</span>校区地址：
                            </label>
                            <input type="text" name="" v-model="school_address" class="form-control">
                        </li>
                       
                        <li>
                        	<label class="seach-label">
                                <span>*</span>课程详情：
                            </label>

                            <style>
                            	#edui1{width:100%;}
                            </style>
                            <!-- 加载编辑器的容器 -->
						    <textarea id="container" style="width:900px;margin-left:137px;margin-top:-23px;"  v-model="intro"></textarea>  
						    
                        </li>
                        
                        <li class="seach"><input type="submit" name="" value="确认" @click="get();"></li>
                    </ul>
                
            </div>

		</div>
	</div>
</div>



{include file="public/footer"}
<script type="text/javascript">
    showLocation();
    CheckProvince('');
    CheckCity('');
    CheckTown('');
var baseurl="<?php echo BASE_URL;?>";
new Vue({
	el:'#update',
	data:{
		name:'',
		code:'',
		pic:'',
		school:'',
		school_address:'',
		intro:'',
		date:'',
        province:'',
        city:'',
        area:'',
        school_name:[],
        school_id:''
	},
	methods:{
		get:function(){
			var intro=ue.getContent();
			//console.log(a);
			this.$http.post(baseurl+'?s=admin/Lesson/update_teacher',{
				'name':this.name,
				'code':this.code,
				'pic':this.pic,
				'school':this.school,
				'school_address':this.school_address,
				'intro':intro,
				'date':this.date,
                'school_id':this.school_id
			}).then(res=>{
				
			},res=>{
				console.log('请求失败处理,请检查Network!');
			})
		},
        choose:function(){
            this.$http.post(baseurl+'?s=admin/Lesson/get_school',{
                'province':this.province,
                'city':this.city,
                'area':this.area}).then(res=>{
                    console.log(res);
                    this.school_name=eval('('+res.bodyText+')');

                },res=>{
                    console.log('请求失败处理,请检查Network!');
                })
            
          },
	}
})

</script>

</body>
</html>